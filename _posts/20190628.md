---
title: "PC, mobile Web, cardboard 에서 동영상 처리"
date: 2019-06-28 14:31:00 -0400
categories: vr 360 cardboard
---

## 1. 모든 모드 확인 및 정리
피씨에서 마우스로 컨트롤, 모바일웹에서 터치로 컨트롤, 센서로 컨트롤, 카드보드에서 센서로 컨트롤 이렇게 4가지 경우가 있을 수 있다.
뭐 하나 만들면 이 네가지 경우를 다 확인해야한다. 특히 모바일웹에서 확인하는건 개발서버에 올려서 확인해야한다. 그런데.... 젠킨스 빌드하면 오류나고 어쩌다 성공하고 개발서버도 내렸다 올려야하는 상황이 자주 발생하고.. 모바일에서 뭔가 확인하는게 어렵다.

나중에 세가지로 확립했다.
피씨 마우스컨트롤, 모바일웹 터치 컨트롤, 카드보드 센서 컨트롤. 모바일 터치 컨트롤은 피씨에서도 확인 가능하기때문에 훨씬 수월해졌다. 카드보드는 불편하지만..

## 2. 동영상 붙이기
일단 유툽 동영상을 붙였고, iframe으로 inpospot을 클릭하면 보였다 안보였다 하게끔했다. 모바일에선 터치로 보였다 안보였다. 클릭과 터치로 유툽 재생하고 끄고 수월하게 작동한다.
문제는 카드보드일때...! 카드보드일때 문제가 많다...

1. 동영상 나오는 영역 조정
피씨는 화면이 커서 모니터 안 어디든 띄우면 상관이 없었다. 모바일에선 동영상영역이 다른곳을 보고 오면 숨겨져 있다. 그럼 다시 띄워야한다. 동영상이 크거나 위치가 포커스에서 멀어지면 재생버튼 누르기위해 화면전환하다가 동영상영역이 숨는 상황이 발생할수 있을거같았다.
그래서 pc버전에선 원래 뜨던 위치(inpospot 상당), 모바일에선 inpospot이 동영상의 가운데 오게 위치를 조정했다. ( 영역이 사라지는 이유는 예전부터 있던 다른 360라이브러리에서도 보이는 현상인데, 큐브로 쪼개서 360이미지를 처리하다보니 그런경우가 생기는듯하다.)

2. 동영상영역 숨기기
pc버전에선 inpospot을 다시 클릭하면 동영상 영역이 숨겨지게 했다. 모바일 버전에선 inpospot을 가리면서 가운데 뜨니까 inpospot을 다시 클릭할 수 없었다.
그래서 닫기 버튼을 추가로 만들었다. 카드보드일때가 문제다.. 이건 카드보드일때 div로 띄우는거 모든것이 문제되는데, 포커스와 div의 상호작용 방법을 모르겠다.
일단 다른곳 봤다가 돌아오면 숨겨져있으니 패스하고 나중에 어떻게 하면 좋을지 더 생각해봐야한다.

3. 동영상 재생
pc, mobile 둘다 클릭이나 터치로 재생버튼 누르면 된다. pc는 div안에서 재생되고, mobile은 동영상모드에서 재생이 된다. 문제는 여기서도 카드보드..
포커스로 일반 div에서의 상호작용을 못한다. 그러면 자동재생을 하게끔 바꿔줬다. 컴퓨터에선 자동재생이 쉽게 되는데, 모바일에선 어렵다. 데이터가 사용자 모르게 많이 나올수 있기때문에 자동재생을 막아놓은 브라우저가 많다. 크롬, 사파리 등
카드보드 빼고는 자동재생이 안되도 된다. 클릭과 터치로 상호작용되니까. 카드보드는 그게 안되니까 자동재생하려는건데..

모바일이면서 카드보드인경우에 (이것도 확인하는 방법이 있겠지...?) inpospot에 포커스가 가면 동영상이 보여지고 재생되는 꼼수가 되는지 테스트해봐야겠다.
이것도 안되면.. 씬전환처럼 360동영상으로 씬전환하는 방법이 있겠다. 그러면 일반 동영상은 찌그러져 보일텐데.. 360으로 동영상 보는 이유가 몰입감 때문이면 당연히 360동영상 제작해서 보여줘야지!

이것도 안되면 또 다른 방법을 찾아봐야....

## 4. div로 동영상 올릴때 이상한 것들
많다.
위에 나온거 말고, 동영상역역이 크거나 포커스를 이동하면 카드보드상에서 양안 나뉘어져있는 영역을 동영상 영역이 침범한다....! (여기 나온 안되거나 문제가 있는것들은 파노렌즈 예시에서도 같은 문제가 있다.)


## 5. 내가 더 해야할 것.
 - 카드보드에서 동영상 숨기기
 - 카드보드에서 동영상 재생
 - div영역을 서로 양안에 못나가게 하기...될까?
